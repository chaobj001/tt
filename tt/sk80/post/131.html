<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="generator" content="blog.sk80.com" /><meta name="keywords" content="linux架设subversion(svn)版本控制:Linux,linux svn " /><meta name="description" content="linux架设subversion(svn)版本控制,PHP Token,linux常用svn命令" /><meta name="author" content="4kychao" /><link rel="stylesheet" type="text/css" href="http://sk2.com/templates/default/style.css" /><title>linux架设subversion(svn)版本控制</title></head><body><div id="wrapper"><div id="header"><div id="header-inner"><p class="sitename">blog.sk80.com</p><div class="description">等我有钱了, 咱买棒棒糖, 买2 根, 1 根 你看着我吃, 另1根 我吃给你看。</div><div class="menu"><ul><li class="current_page"><a rel="nofollow" href="/">日志</a></li><!--li><a href="#">About</a></li--></ul></div></div></div><div id="wrapper-inner"><p id="topic-path"><a href="/" rel="nofollow">Home</a>&gt;<a href="http://sk2.com/category/linux/">Linux</a>&gt;<strong class="current">linux架设subversion(svn)版本控制</strong></p><ul id="flip1" class="flip"><li class="newer"><a title="PHP Token" href="http://sk2.com/post/132.html" rel="nofollow">Newer</a></li><li class="older"><a title="linux常用svn命令" href="http://sk2.com/post/130.html" rel="nofollow">Older</a></li></ul><div id="detail"><div class="post"><h1>linux架设subversion(svn)版本控制</h1><ul class="info"><li class="date">2010年 03月24日  00:49</li><li class="category"><a href="http://sk2.com/category/linux/">Linux</a></li></ul><div class="textbody"><p>1.需要两个文件，httpd和subversion. httpd是web服务器，用来通过web访问subversion，httpd可以在apache官方网站上下载到&nbsp;</p><p>2.新建一个用户：svnroot <br />最好不要让root用户参与到<span class="hilite2">svn</span>的权限管理和日常的运行和维护工作中来，但是下面的一些安装和配置操作还是 需要root用户来完成的，因为有些操作只有root才能做。权限问题很重要。曾经因为权限问题折腾了一天。</p><p>3.编译安装httpd (root用户操作)：<br /></p><table border="0">    <tbody>        <tr>            <td><span style="color:#008000;">//解压apache2安装包</span><br /># tar xvzf httpd-2.2.2.tar.gz<br /><span style="color:#008000;">//进入解压后的目录</span><br /># cd httpd-2.2.2<br /><span style="color:#008000;">//配置apache安装，前两个参数是必须要加的，你还可以根据您的需要添加其他的参数。</span><br /><span style="color:#008000;">//后面的参数制定你要把apache安装哪里</span><br /># ./configure --enable-dav --enable-so --prefix=/usr/local/apache2/<br /># make<br /><span style="color:#008000;">//安装</span><br /># make install<br /># cd /usr/local/apache2/bin<br /><span style="color:#008000;">//启动apache服务</span><br /># ./apachectl start<br /><span style="color:#008000;">//打开浏览器http://localhost/如果有测试页"It works!"出现则证明已经安装成功。</span><br /></td>        </tr>    </tbody></table><p>4.</p><p>安装Subversion<br /></p><table border="0">    <tbody>        <tr>            <td><span style="color:#008000;">//解压SubVersion安装包 (root用户进行下面的操作)</span><br /># tar xvzf Subversion-1.3.1.tar.gz<br /><span style="color:#008000;">//进入解压后的目录</span><br /># cd Subversion-1.3.1<br /><span style="color:#008000;">//配置subversion安装</span><br />#./configure --with-apxs=/usr/local/apache2/bin/apxs --prefix=/usr/local/subversion <br />--with-apr=/usr/local/apache2 --with-apr-util=/usr/local/apache2 --with-ssl --with-zlib <br />--enable-maintainer-mode<br /># make<br /><span style="color:#008000;">//安装</span><br /># make install<br /><span style="color:#008000;">//创建库文件所在的目录 (svnroot用户进行下面的操作)</span><br /># mkdir /home/svnroot/repository<br /><span style="color:#008000;">//进入subversion的bin目录</span><br /># cd /usr/local/subversion/bin<br /><span style="color:#008000;">//创建仓库"test"</span><br /># ./svnadmin create /home/svnroot/repository/test<br /># cd /home/svnroot/repository/test<br /><span style="color:#008000;">//看看是不是多了些文件，如果是则说明Subversion安装成功了</span><br /># ls –l<br /># cd /usr/local/subversion/bin<br /><span style="color:#008000;">//这条语句将把路径/home/user/import下找到的文件导入到你创建的Subversion 仓库中去，</span><br /><span style="color:#008000;">//提交后的修订版为1。</span><br /># ./<span class="hilite2">svn</span> import /home/user/import file:///home/svnroot/repository/test –m "注释"<br /><span style="color:#008000;">//不让其他人有该目录的权限</span><br /># chmod 700 /home/svnroot/repository</td>        </tr>    </tbody></table><p>5.修改Apache配置文件<br /></p><table border="0">    <tbody>        <tr>            <td># cd /usr/local/apadche2/bin <br /><span style="color:#008000;">//启动Apache </span><br /># ./apachect1 start <br /># vi /usr/local/apache2/conf/httpd.conf <br />&nbsp;&nbsp; <span style="color:#008000;">//在最下面添加 </span><br />&nbsp;&nbsp; LoadModule dav_svn_module modules/mod_dav_svn.so <br />&nbsp;&nbsp; LoadModule authz_svn_module modules/mod_authz_svn.so <br />&nbsp;&nbsp; &lt;Location /<span class="hilite2">svn</span>&gt; <br />&nbsp;&nbsp; DAV <span class="hilite2">svn</span> <br />&nbsp;&nbsp; SVNParentPath /home/svnroot/repository/ <span style="color:#008000;">//<span class="hilite2">svn</span>父目录 </span><br />&nbsp;&nbsp; AuthzSVNAccessFile /home/svnroot/repository/authz.conf <span style="color:#008000;">//权限配置文件 </span><br />&nbsp;&nbsp; AuthType Basic <span style="color:#008000;">//连接类型设置 </span><br />&nbsp;&nbsp; AuthName "Subversion.zoneyump" <span style="color:#008000;">//连接框提示 </span><br />&nbsp;&nbsp; AuthUserFile /home/svnroot/repository/authfile <span style="color:#008000;">//用户配置文件 </span><br />&nbsp;&nbsp; Require valid-user <span style="color:#008000;">//采用何种认证 </span><br />&nbsp;&nbsp; &lt;/Location&gt;<br /><span style="color:#008000;">&nbsp;&nbsp; //其中authfile是通过"htpasswd [–c] /home/svnroot/repository/authfile username password"来创建的 <br />&nbsp;&nbsp; //"Require valid-user"告诉apache在authfile中所有的用户都可以访问。如果没有它，<br />&nbsp;&nbsp; //则只能第一个用户可以访问新建库 </span><br /></td>        </tr>    </tbody></table><p>6.重启apache</p><table border="0">    <tbody>        <tr>            <td># ./usr/local/apache2/bin/apachectl restart <br /><span style="color:#008000;">//打开浏览器访问<a href="http://localhost/svn/test/">http://localhost/<span class="hilite2">svn</span>/test/</a>，如果有东西显示就说明成功。</span><br /></td>        </tr>    </tbody></table><p>7.权限管理<br />1)增加用户<br /></p><table border="0">    <tbody>        <tr>            <td># htpasswd [-c] /home/svnroot/repository/authfile wooin<br /><span style="color:#008000;">//第一次设置用户时使用-c表示新建一个用户文件。回车后输入用户密码，完成对用户的增加</span><br /># htpasswd authfile 用户名(加入新的用户)<br /></td>        </tr>    </tbody></table><p>2)权限分配<br /></p><table border="0">    <tbody>        <tr>            <td># vi /home/svnroot/repository/authz.conf <br />&nbsp;&nbsp; [test:/] <span style="color:#008000;">//这表示，仓库test的根目录下的访问权限 </span><br />&nbsp;&nbsp; wooin = rw <span style="color:#008000;">//test仓库wooin用户具有读和写权限 </span><br />&nbsp;&nbsp; bao = r <span style="color:#008000;">//test仓库bao用户具有读权限 </span><br />&nbsp;&nbsp; [test2:/] <span style="color:#008000;">//test2仓库根目录下的访问权限 </span><br />&nbsp;&nbsp; wooin = r <span style="color:#008000;">//wooin用户在test2仓库根目录下只有读权限 </span><br />&nbsp;&nbsp; bao = <span style="color:#008000;">//bao用户在 test2仓库根目录下无任何权限 </span><br />&nbsp;&nbsp; [/] <span style="color:#008000;">//这个表示在所有仓库的根目录下 </span><br />&nbsp;&nbsp; * = r <span style="color:#008000;">//这个表示对所有的用户都具有读权限 </span><br />&nbsp;&nbsp; #[groups] <span style="color:#008000;">//这个表示群组设置 </span><br />&nbsp;&nbsp; #svn1-developers = wooin, bao <span style="color:#008000;">//这个表示某群组里的成员 </span><br />&nbsp;&nbsp; #svn2-developers = wooin <br />&nbsp;&nbsp; #[svn1:/] <br />&nbsp;&nbsp; #@svn1-developers = rw <span style="color:#008000;">//如果在前面加上@符号，则表示这是个群组权限设置</span><br /></td>        </tr>    </tbody></table><p>将这个设置完成后。重启Apache，就可以通过 <br />http://localhost/<span class="hilite2">svn</span>/test <br />这个URL来访问仓库了，当然，受权限的限制，必须是合法用户才能访问且具有相应的权限 </p><p></p><p><br /><span style="font-size:large;">备注：</span></p><p>1。apache进程的权限：因为所有跟仓库传输的操作都是通过apache进程进行的，所以即使你给<span class="hilite2">svn</span>用户设置了 很大的权限，但是apache进程没有访问仓库或者相关文件的权限也没有用，apache进程的权限设置在 /usr/local/apache2/conf/httpd.conf 文件中配置，找到文件中的这两行：<br /></p><table border="0">    <tbody>        <tr>            <td>User daemon # 将daemon改为svnroot，让apache进程以svnroot的身份运行 <br />Group daemon <br /></td>        </tr>    </tbody></table><p>2。</p><p>在/etc/profile的结尾设置一些<span class="hilite2">svn</span>启动时要做的工作</p><table border="0">    <tbody>        <tr>            <td># start apache server for <span class="hilite2">svn</span> <br />/usr/sbin/apachectl start <br />export SVN_EDITOR=vi </td>        </tr>    </tbody></table><p>3。/home/respository/svnroot下的文件操作权限有给svnroot.</p></div><div class="entry-tags"><strong>Tags:</strong><a href="http://sk2.com/tag/linux/">linux</a>,<a href="http://sk2.com/tag/svn/">svn</a></div></div><ul id="flip2" class="flip"><li>Newer:<a href="http://sk2.com/post/132.html">PHP Token</a></li><li>Older:<a href="http://sk2.com/post/130.html">linux常用svn命令</a></li></ul></div>
<div id="footer"><div><a rel="nofollow" class="admin" href="http://sk2.com/login"><small>ADMIN</small></a><address>&copy; 2010 <a href='http://sk2.com/'>blog.sk80.com</a></address></div></div></div></div><script type="text/javascript" src="http://sk2.com/include/js/resize.js"></script><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-5695529-2");pageTracker._trackPageview();} catch(err) {}</script></body></html>

<script language="javascript" type="text/javascript" src="http://js.users.51.la/3688801.js"></script>
<noscript><a href="http://www.51.la/?3688801" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/3688801.asp" style="border:none" /></a></noscript>