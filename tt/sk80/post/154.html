<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="generator" content="blog.sk80.com" /><meta name="keywords" content="linux装系统后的基础操作:Linux," /><meta name="description" content="linux装系统后的基础操作,Linux IP命令教程,Linux系统常用信息查看命令" /><meta name="author" content="4kychao" /><link rel="stylesheet" type="text/css" href="http://sk2.com/templates/default/style.css" /><title>linux装系统后的基础操作</title></head><body><div id="wrapper"><div id="header"><div id="header-inner"><p class="sitename">blog.sk80.com</p><div class="description">等我有钱了, 咱买棒棒糖, 买2 根, 1 根 你看着我吃, 另1根 我吃给你看。</div><div class="menu"><ul><li class="current_page"><a rel="nofollow" href="/">日志</a></li><!--li><a href="#">About</a></li--></ul></div></div></div><div id="wrapper-inner"><p id="topic-path"><a href="/" rel="nofollow">Home</a>&gt;<a href="http://sk2.com/category/linux/">Linux</a>&gt;<strong class="current">linux装系统后的基础操作</strong></p><ul id="flip1" class="flip"><li class="newer"><a title="Linux IP命令教程" href="http://sk2.com/post/155.html" rel="nofollow">Newer</a></li><li class="older"><a title="Linux系统常用信息查看命令" href="http://sk2.com/post/153.html" rel="nofollow">Older</a></li></ul><div id="detail"><div class="post"><h1>linux装系统后的基础操作</h1><ul class="info"><li class="date">2010年 03月28日  23:13</li><li class="category"><a href="http://sk2.com/category/linux/">Linux</a></li></ul><div class="textbody"><p>[普通用户的建立与删除]<br />　　[root@svr]useradd yemaosheng<br />　　#建立用户名为 yemaosheng 的普通用户<br />　　[root@svr]passwd yemaosheng<br />　　#为用户 yemaosheng 设置密码<br />　　Changing password for user yemaosheng.<br />　　New UNIX password:<br />　　#输入密码（密码不会被显示）<br />　　Retype new UNIX password:<br />　　#再次输入密码确认两次密码一致<br />　　passwd: all authentication tokens updated successfully.<br />　　#密码设置成功</p><p>　　#userdel -r yemaosheng<br />　　#删除用户名为 yemaosheng 的普通用户</p><p>[将普通用户设置到不同的用户组中]<br />　　[root@svr]usermod -G wheel yemaosheng<br />　　#将普通用户 yemaosheng 加在管理员组wheel组中<br />　　[root@svr]usermod -G wheel,www yemaosheng<br />　　#将普通用户 yemaosheng 同时加在wheel和www组中</p><p>[设置系统时间及自动同步系统时间]<br />　　[root@svr]yum install –y ntp<br />　　#安装NTP官方的时间同步程序 (NTP:中国国家授时中心)<br />　　[root@svr]/usr/sbin/ntpdate -s pool.ntp.org<br />　　#以NTP官方服务器为准调整本地时间<br />　　[root@svr]crontab -e<br />　　#编辑计划任务列表<br />　　0 3 * * * /usr/sbin/ntpdate -s pool.ntp.org<br />　　#编辑文件到此状态，表示每天凌晨3点自动同步时间<br />　　[root@svr]/sbin/service crond reload<br />　　#重载计划任务配置</p><p>[关闭不需要的服务]<br />　　[root@svr]setup<br />　　#开启图形设置界面<br />　　选择System service 进入服务列表<br />　　使用”空格”键选择”[*]“或取消”[ ]“服务</p><p>　　只保留以下服务，未列出的服务一律关闭：<br />　　crond<br />　　irqbalance<br />　　#仅当服务器CPU为S.M.P架构或支持双核心、HT技术时，才需开启，否则关闭。<br />　　iptables<br />　　microcode_ctl<br />　　network<br />　　sshd<br />　　syslog<br />　　vsftpd<br />　　yum-updatesd</p><p>[系统更新]<br />　　[root@svr]vi /etc/yum.repos.d/CentOS-Base.repo<br />　　#修改系统更新地址文件<br />　　将所有”baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/”<br />　　修改为”baseurl=http://mirrors.shlug.org/centos/$releasever/os/$basearch/”<br />　　[root@svr]yum -y upgrade<br />　　#更新系统文件</p><p>[用OpenSSH构建SSH服务器]<br />　　[root@svr]vi /etc/ssh/sshd_config<br />　　#用vi打开SSH的配置文件<br />　　将”#Protocol 2,1″<br />　　修改为　　   “Protocol 2″<br />　　#只允许SSH2方式的连接(Centos 5.2中已包含此设置)</p><p>　　将”#ServerKeyBits 768″<br />　　修改为　　   “ServerKeyBits 1024″<br />　　#将ServerKey强度改为1024比特</p><p>　　将”#PermitRootLogin yes”<br />　　修改为　　   “PermitRootLogin no”<br />　　#不允许用root进行登录(wheel组用户SSH登陆后可用su命令使用root权限)</p><p>　　将”#PasswordAuthentication yes”<br />　　修改为　　   “PasswordAuthentication no”<br />　　#不允许密码方式的登录(SSH远程管理用密钥登陆会安全很多)</p><p>　　将”#PermitEmptyPasswords no”<br />　　修改为　　   “PermitEmptyPasswords no”<br />　　#不允许空密码登录</p><p>　　[root@svr]vi /etc/hosts.deny<br />　　#修改屏蔽规则，在此限定仅有哪些IP地址可以SSH远程登陆本服务器<br />　　sshd: ALL<br />　　#在文件末尾添加这一行，屏蔽所有的SSH连接请求</p><p>　　[root@svr]vi /etc/hosts.allow<br />　　#修改允许规则，在此限定仅有哪些IP地址可以SSH远程登陆本服务器<br />　　sshd:210.18.160.<br />　　sshd:10.2.92.26<br />　　sshd:10.2.97.120<br />　　#在文件末尾添加这三行，只允许来自210.18.160网段、IP地址为10.2.92.26和IP地址为10.2.97.120的SSH连接请求</p><p>　　[root@svr]/etc/init.d/sshd restart<br />　　#重新启动SSH服务器<br />　　Stopping sshd:　　　　　　　　　　　　 [ OK ]<br />　　Starting sshd:　　　　　　　　　　　　 [ OK ]<br />　　#SSH服务器重新启动成功</p><p>　　[root@svr]su - yemaosheng<br />　　#用普通用户 yemaosheng 登陆服务器<br />　　$ ssh-keygen -t rsa<br />　　#建立公钥与私钥<br />　　Generating public/private rsa key pair.<br />　　Enter file in which to save the key (/home/kaz/.ssh/id_rsa):<br />　　#钥匙的文件名，这里保持默认直接回车<br />　　Created directory ‘/home/kaz/.ssh’<br />　　Enter passphrase (empty for no passphrase):<br />　　#输入密钥口令(使用SSH远程软件时会用到)<br />　　Enter same passphrase again:<br />　　#再次输入密钥口令(使用SSH远程软件时会用到)<br />　　Your identification has been saved in /home/kaz/.ssh/id_rsa.<br />　　#建立了id_rsa私钥文件<br />　　Your public key has been saved in /home/kaz/.ssh/id_rsa.pub.<br />　　#建立了id_rsa.pub公钥文件</p><p>　　$ cd ~/.ssh<br />　　#进入 yemaosheng 用户SSH配置文件的目录(~/目录相当于/home/yemaosheng/)<br />　　$ cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys<br />　　#公钥内容输出到authorized_keys文件中<br />　　$ rm -f ~/.ssh/id_rsa.pub<br />　　#删除原来的公钥文件<br />　　$ chmod 400 ~/.ssh/authorized_keys<br />　　#将新建立的公钥文件属性设置为400</p><p>　　$ exit<br />　　#退出普通用户的登录<br />　　登陆为root用户，插入U盘<br />　　[root@svr]fdisk -l<br />　　#显示目前所有硬盘，找到U盘设备名为sdb1 (具体情况具体对待，这里各服务器有所不同)<br />　　[root@svr]mount /dev/sdb1 /mnt<br />　　#挂载U盘设备到/mnt目录<br />　　[root@svr]mv /home/yemaosheng/.ssh/id_rsa /mnt/<br />　　#移动id_rsa私钥文件到U盘中<br />　　[root@svr]umount /mnt/<br />　　#卸载U盘</p></div></div><ul id="flip2" class="flip"><li>Newer:<a href="http://sk2.com/post/155.html">Linux IP命令教程</a></li><li>Older:<a href="http://sk2.com/post/153.html">Linux系统常用信息查看命令</a></li></ul></div>
<div id="footer"><div><a rel="nofollow" class="admin" href="http://sk2.com/login"><small>ADMIN</small></a><address>&copy; 2010 <a href='http://sk2.com/'>blog.sk80.com</a></address></div></div></div></div><script type="text/javascript" src="http://sk2.com/include/js/resize.js"></script><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-5695529-2");pageTracker._trackPageview();} catch(err) {}</script></body></html>

<script language="javascript" type="text/javascript" src="http://js.users.51.la/3688801.js"></script>
<noscript><a href="http://www.51.la/?3688801" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/3688801.asp" style="border:none" /></a></noscript>