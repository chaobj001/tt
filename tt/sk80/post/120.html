<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="generator" content="blog.sk80.com" /><meta name="keywords" content="Centos5.2下LAMP环境配置（HCH）:Linux,centos 环境配置 " /><meta name="description" content="Centos5.2下LAMP环境配置（HCH）,linux目录结构,linux常用命令" /><meta name="author" content="4kychao" /><link rel="stylesheet" type="text/css" href="http://sk2.com/templates/default/style.css" /><title>Centos5.2下LAMP环境配置（HCH）</title></head><body><div id="wrapper"><div id="header"><div id="header-inner"><p class="sitename">blog.sk80.com</p><div class="description">等我有钱了, 咱买棒棒糖, 买2 根, 1 根 你看着我吃, 另1根 我吃给你看。</div><div class="menu"><ul><li class="current_page"><a rel="nofollow" href="/">日志</a></li><!--li><a href="#">About</a></li--></ul></div></div></div><div id="wrapper-inner"><p id="topic-path"><a href="/" rel="nofollow">Home</a>&gt;<a href="http://sk2.com/category/linux/">Linux</a>&gt;<strong class="current">Centos5.2下LAMP环境配置（HCH）</strong></p><ul id="flip1" class="flip"><li class="newer"><a title="linux目录结构" href="http://sk2.com/post/121.html" rel="nofollow">Newer</a></li><li class="older"><a title="linux常用命令" href="http://sk2.com/post/119.html" rel="nofollow">Older</a></li></ul><div id="detail"><div class="post"><h1>Centos5.2下LAMP环境配置（HCH）</h1><ul class="info"><li class="date">2010年 03月23日  22:30</li><li class="category"><a href="http://sk2.com/category/linux/">Linux</a></li></ul><div class="textbody"><p align="center"><strong>Centos5.2下LAMP环境配置</strong></p><p align="right"><strong>——基于apache2.2.3+mysql5.0.41+php5.2.3+</strong></p><p align="right"><strong>Memcached1.4.0+memcache2.2.5+ZendOptimizer-3.3.0a</strong></p><p align="right"><strong>胡春晖</strong></p><p align="right">2009-1-5创建</p><p align="right">&nbsp;2009-8-4更新</p><p><strong>一、前期准备</strong></p><p><strong>软件包及下载地址：</strong></p><p>apache - http://www.apache.org # web服务器<br />mysql - http://www.mysql.org# 数据库<br />php - http://www.php.net # php环境<br />zend optimizer - http://www.zend.com# php加速引擎<br />gd-2.0.33.tar.gz - http://www.libgd.org/releases/#php的gd库支持<br />jpegsrc.v6b.tar.gz - http://www.ijg.org/files/#gd库的jpeg支持<br />libpng-1.2.7.tar.tar - http://sourceforge.net/projects/libpng/ #gd库的png支持<br />zlib-1.2.3.tar.gz - http://www.zlib.net/zlib-1.2.3.tar.gz#zlib支持<br />libxml2-2.7.3.tar.gz - ftp://xmlsoft.org/libxml2/libxml2-2.7.3.tar.gz#libxml2支持，php安装需要<br />freetype-2.1.9.tar.gz - http://sourceforge.net/projects/freetype/files/#freetype支持</p><p>memcached2.2.5 - http://www.danga.com #memcached服务器端</p><p>libevent - http://www.monkey.org/~provos/libevent/#libevent库，memcached依赖该库</p><p>memcache - http://pecl.php.net/package/memcache#memcache客户端</p><p></p><p><strong>二、安装一些基本库</strong></p><p>先用以下命令探测系统默认是否安装： </p><p>rpm –qa | grep zlib</p><p>rpm –qa | grep png</p><p>rpm –qa | grep jpeg</p><p>rpm –qa | grep libxml</p><p>rpm –qa | grep freetype</p><p>rpm –qa | grep gd</p><p>如果已经安装，可以使用系统自带的，也可以用rpm –e name先卸载再用源码形式安装（需要按顺序安装，并且最好指定安装目录—prefix=/usr/local/…）。</p><p></p><p><strong>三、安装apache</strong></p><p>编译之前可以先用命令./configure–help查看编译文档，选择自己需要的参数编译</p><p># tar -zxvf httpd-2.2.3.tar.gz<br /># cd httpd-2.2.3<br />#./configure --prefix=/usr/local/apache2 --sysconfdir=/etc --enable-so --enable-rewrite--with-z <br /># make<br /># make install</p><p></p><p><strong>四、安装mysql</strong></p><p><strong>（一）、5.0以及更旧版本</strong></p><p></p><p><strong>安装：</strong></p><p>tar -xzvf mysql-mysql-5.0.41.tar.gz </p><p>cd mysql-5.0.41<br />./configure --prefix=/usr/local/mysql </p><p>make<br />make install</p><p></p><p>在support-files目录中,选择一个适当的.cnf文件,cp到/etc/my.cnf</p><p>cd /usr/local/mysql/bin<br />./mysql_install_db<br />../share/mysql/mysql.server start</p><p></p><p><strong>启动mysql进程：</strong></p><p>/usr/local/mysql/bin/mysqld_safe--user=root</p><p>/usr/local/mysql/share/mysql/mysql.serverstart</p><p></p><p><strong>修改默认的空密码：</strong></p><p>/usr/local/mysql/bin/mysqladmin -u root-p password 'xxx'</p><p></p><p><strong>测试登陆：</strong></p><p>/usr/local/mysql/bin/mysql -u root -p</p><p></p><p>mysql.server这个文件可以copy到/etc/rc.d/init.d目录下,设置系统启动的时候自动启动mysql服务</p><p></p><p><strong>（二）、5.1版本的安装</strong></p><p></p><p><strong>1、MySQL免安装版/二进制版软件，不用编译，下载地址：</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;http://dev.mysql.com/downloads/</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 文件格式：MYSQL-VERSION-OS.tar.gz</p><p></p><p><strong>2、创建mysql组，建立mysql用户并加入到mysql组中。</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp; （不同版本的Unix中，groupadd和useradd的语法可能会稍有不同。）</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#groupadd mysql</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#useradd -g mysql mysql</p><p></p><p><strong>3、进入目录/usr/local，解压缩免安装版，并在此目录中建立名为mysql的软链接。</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;#cd /usr/local</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#gunzip &lt; /path/to/MYSQL-VERSION-OS.tar.gz | tar xvf -</p><p>&nbsp;&nbsp;&nbsp;&nbsp;(该命令会在本目录下创建一个名为MYSQL-VERSION-OS的新目录。)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;(使用GNU tar，则不再需要gunzip。你可以直接用下面的命令来解包和提取分发：</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&gt; tar zxvf/path/to/mysql-VERSION-OS.tar.gz)</p><p></p><p>&nbsp;&nbsp;&nbsp;&nbsp;#ln -s MYSQL-VERSION-OS mysql</p><p></p><p></p><p><strong>4、添加MySQL配置文件。</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果你想要设置一个选项文件，使用support-files目录中的一个作为模板。在这个目录中有4个模板文件，是根据不同机器的内存定制的。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#cp support-files/my-medium.cnf /etc/my.cnf</p><p>&nbsp;&nbsp;&nbsp;&nbsp;(可能你需要用root用户运行这些命令。)</p><p></p><p><strong>5、设定目录访问权限，用mysql_install_db创建MySQL授权表初始化，并设置mysql,root帐号访问权限。</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;#cd mysql</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#chown -R mysql .</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#chgrp -R mysql .</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#scripts/mysql_install_db –-user=mysql --basedir=/usr/local/mysql(--no-defalts)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#chown -R root .</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#chown -R mysql data</p><p>&nbsp;&nbsp;&nbsp;&nbsp;(注意以上命令中的". "符号不能少。)</p><p></p><p><strong>6、运行mysql</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;#bin/mysqld_safe –-user=mysql &amp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(如果没有问题的话,应该会出现类似这样的提示:</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [1] 42264</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Starting mysqld daemon withdatabases from /usr/local/mysql/var</p><p>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;如果出现 mysql ended这样的语句，表示Mysql没有正常启动，你可以到log中查找问题，Log文件的通常在/etc/my.cnf中配置。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;大多数问题是权限设置不正确引起的。 )</p><p></p><p><strong>7、设置root密码。默认安装密码为空，为了安全你需要修改密码。</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;#/usr/local/mysql/bin/mysqladmin –u root password yourpassword</p><p></p><p><strong>8、拷贝编译目录的一个脚本，设置开机自动启动。</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;#cp&nbsp; support-files/mysql.server/etc/init.d/mysqld</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#chmod 700 /etc/init.d/mysqld</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#chkconfig –-add mysqld</p><p>&nbsp;&nbsp;&nbsp;&nbsp;#chkconfig –level 345 mysqld on(似乎不需要)</p><p></p><p><strong>9、启动mysqld服务。</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;#service mysqld start</p><p></p><p><strong>10、查看3306端口是否打开。要注意在防火墙中开放该端口。</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;#netstat -atln</p><p></p><p>安装过程转载自MySQLpub.com作者：kider</p><p></p><p><strong>免安装版/二进制版安装基本命令概述：</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; groupadd mysql</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; useradd -g mysql mysql</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; cd /usr/local</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; gunzip &lt; /PATH/TO/MYSQL-VERSION-OS.tar.gz | tar xvf -</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; ln -s FULL-PATH-TO-MYSQL-VERSION-OS mysql</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; cd mysql</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; chown -R mysql .</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; chgrp -R mysql .</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; scripts/mysql_install_db –user=mysql</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; chown -R root .</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; chown -R mysql data</p><p>&nbsp;&nbsp;&nbsp;&nbsp;shell&gt; bin/mysqld_safe –user=mysql &amp;</p><p></p><p><strong>五、安装php</strong></p><p><strong>安装：</strong></p><p># tar -zxvf php-5.2.5.tar.gz<br /># cd php-5.2.5</p><p># ./configure --prefix=/usr/local/php \</p><p>&nbsp;--with-apxs2=/usr/local/apache2/bin/apxs \</p><p>&nbsp;--with-config-file-path=/etc \</p><p>&nbsp;--disable-debug \</p><p>&nbsp;--enable-shared \</p><p>&nbsp;--with-mysql=/usr/local/mysql \</p><p>&nbsp;--with-mysql-sock=/tmp/mysql.sock \</p><p>&nbsp;--with-zlib \</p><p>&nbsp;--with-png-dir=/usr \</p><p>&nbsp;--with-jpeg-dir=/usr/local/libs/jpeg \</p><p>&nbsp;--with-libxml-dir=/usr/local/libs/libxml2 \</p><p>&nbsp;--with-freetype-dir=/usr/local/libs/freetype \</p><p>&nbsp;--with-gd=/usr/local/libs/gd2 \</p><p>&nbsp;--enable-gd-native-ttf \</p><p>&nbsp;--without-pear \</p><p>&nbsp;--with-pic \</p><p>&nbsp;--with-bz2 \</p><p>&nbsp;--with-curl \</p><p>&nbsp;--enable-mbstring \</p><p>--with-openssl \</p><p>&nbsp;--enable-sockets \</p><p>&nbsp;--enable-exif \</p><p>&nbsp;--enable-ftp</p><p># make<br /># make install</p><p></p><p><strong>复制配置文件到/etc目录下</strong></p><p># cp php.ini-dist /etc/php.ini</p><p>cp那个文件可以是php.ini-dist也可以是php.ini-recommended这两个都是php.ini的样例文件。php.ini- recommended比前者更加严格，是官方做了修改的配置，有助于规范全球的php代码。但是注意，如果你配置这个php环境是为了装那些开源程序，建议你还是使用前者吧，因为有很多开源程序的代码都不规范，尤其是很多国内的，比如discuz，phpwind。不然你会发现这些开源程序根本运行不了。</p><p></p><p></p><p><strong>六、安装memcached（服务器端）</strong></p><p><strong>1.分别把memcached和libevent下载回来，放到 /tmp 目录下：</strong></p><p># cd /tmp</p><p># wget http://www.danga.com/memcached/dist/memcached-1.2.0.tar.gz</p><p># wget http://www.monkey.org/~provos/libevent-1.2.tar.gz</p><p></p><p><strong>2.先安装libevent：</strong></p><p># tar zxvf libevent-1.2.tar.gz</p><p># cd libevent-1.2</p><p># ./configure –-prefix=/usr (最好用该路径)</p><p># make</p><p># make install</p><p></p><p><strong>3.测试libevent是否安装成功：</strong></p><p># ls -al /usr/lib | grep libevent</p><p>lrwxrwxrwx 1 root root 21 11?? 12 17:38libevent-1.2.so.1 -&gt; libevent-1.2.so.1.0.3</p><p>-rwxr-xr-x 1 root root 263546 11?? 1217:38 libevent-1.2.so.1.0.3</p><p>-rw-r–r– 1 root root 454156 11?? 1217:38 libevent.a</p><p>-rwxr-xr-x 1 root root 811 11?? 1217:38 libevent.la</p><p>lrwxrwxrwx 1 root root 21 11?? 12 17:38libevent.so -&gt; libevent-1.2.so.1.0.3</p><p>还不错，都安装上了。</p><p></p><p><strong>4.安装memcached，同时需要安装中指定libevent的安装位置：</strong></p><p># cd /tmp</p><p># tar zxvf memcached-1.2.0.tar.gz</p><p># cd memcached-1.2.0</p><p># ./configure –-with-libevent=/usr</p><p># make</p><p># make install</p><p>如果中间出现报错，请仔细检查错误信息，按照错误信息来配置或者增加相应的库或者路径。<br />安装完成后会把memcached放到 /usr/local/bin/memcached </p><p></p><p><strong>5.测试是否成功安装memcached：</strong></p><p># ls -al /usr/local/bin/mem*</p><p></p><p><strong>七、安装memcache（客户端）</strong></p><p><strong>1.在http://pecl.php.net/package/memcache 选择相应想要下载的memcache版本。</strong></p><p></p><p><strong>2.安装PHP的memcache扩展</strong></p><p>tar vxzf memcache-2.2.1.tgz</p><p>cd memcache-2.2.1</p><p>/usr/local/php/bin/phpize</p><p>./configure –enable-memcache \</p><p>-–with-php-config=/usr/local/php/bin/php-config\</p><p>–-with-zlib-dir</p><p>make</p><p>make install</p><p></p><p><strong>3.上述安装完后会有类似这样的提示：</strong></p><p>Installing shared extensions:/usr/local/php/lib/php/extensions/no-debug-non-zts-2007xxxx/</p><p></p><p><strong>4.把php.ini中的extension_dir = “./”修改为</strong></p><p>extension_dir =“/usr/local/php/lib/php/extensions/no-debug-non-zts-2007xxxx/”</p><p></p><p><strong>5.添加一行来载入memcache扩展：</strong></p><p>extension=memcache.so</p><p></p><p></p><p><strong>八、出错的排错方法:<br />1、./configure的时候出错</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一般是因为你的一些编译参数造成的，某个目录指定的不正确。比如编译GD时，你的--with-freetype= /dir，dir这个路径它找不到freetype的文件。根据提示信息或者在当前目录下less configure.log，就能查到出错原因，再或者俺们不加这个参数了。俺们的php就不支持freetype了怎么地?<br /><strong>2、make的时候出错</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一般可能是因为编译时需要链接某个.h文件找不到之类的。这种情况你可以去vi它的Makefile一系列文件，修改源代码。如果你懂linux下的c就更好办了。<br /><strong>3、make install的时候出错</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这种情况一般是因为创建目录的问题，它创建不了自己的安装目录。这种情况你就根据它的错误提示手动去创建那些目录。</p><p><strong>4、执行memcached命令时出现错误</strong></p><p>#/u01/memcached/bin/memcached -h</p><p>/u01/memcached/bin/memcached: error whileloading shared libraries: libevent-1.4.so.2:</p><p>cannot open shared object file: No suchfile or directory</p><p>一般对于这种依赖的库找不到的情况，在Linux中可以通过设置LD_DEBUG环境变量来获得更多的信息</p><p>#LD_DEBUG=help ls</p><p>Valid options for the LD_DEBUGenvironment variable are:</p><p></p><p>&nbsp;libs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; display library searchpaths</p><p>&nbsp;reloc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; display relocationprocessing</p><p>&nbsp;files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; display progress forinput file</p><p>&nbsp;symbols&nbsp;&nbsp;&nbsp;&nbsp; display symbol tableprocessing</p><p>&nbsp;bindings&nbsp;&nbsp;&nbsp; display informationabout symbol binding</p><p>&nbsp;versions&nbsp;&nbsp;&nbsp; display versiondependencies</p><p>&nbsp;all&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; all previous optionscombined</p><p>&nbsp;statistics&nbsp; display relocationstatistics</p><p>&nbsp;unused&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; determined unused DSOs</p><p>&nbsp;help&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; display this helpmessage and exit</p><p></p><p>To direct the debugging output into afile instead of standard output</p><p>a filename can be specified using theLD_DEBUG_OUTPUT environment variable.</p><p>这里由于是库文件依赖有问题，则使用libs参数：</p><p>#LD_DEBUG=libs/u01/memcached/bin/memcached -h</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp; findlibrary=libevent-1.4.so.2 [0]; searching</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; searchcache=/etc/ld.so.cache</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; searchpath=/lib64/tls/x86_64:/lib64/tls:/lib64/x86_64:/lib64:/usr/lib64/tls/x86_64</p><p>/usr/lib64/tls:/usr/lib64/x86_64:/usr/lib64</p><p>(system search path)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tryingfile=/lib64/tls/x86_64/libevent-1.4.so.2</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; trying file=/lib64/tls/libevent-1.4.so.2</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tryingfile=/lib64/x86_64/libevent-1.4.so.2</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tryingfile=/lib64/libevent-1.4.so.2</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tryingfile=/usr/lib64/tls/x86_64/libevent-1.4.so.2</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tryingfile=/usr/lib64/tls/libevent-1.4.so.2</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tryingfile=/usr/lib64/x86_64/libevent-1.4.so.2</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tryingfile=/usr/lib64/libevent-1.4.so.2</p><p>&nbsp;&nbsp;&nbsp;&nbsp;30596:</p><p>/u01/memcached/bin/memcached: errorwhile loading shared libraries: libevent-1.4.so.2:</p><p>cannot open shared object file: No suchfile or directory</p><p>可以看到是在加载/usr/lib64/libevent-1.4.so.2文件时出现了问题，系统中确实是没有该文件的，查找后发现libevent-1.4.so.2存在于/usr/lib目录，这可能是libevent在64位Linux系统上的一个bug吧，没有关系，复制一份 或者建一个软链接即可解决问题。</p><p></p><p></p><p><strong>九、安装后配置</strong></p><p><strong>1、配置Apache</strong></p><p>打开httpd.conf文件：</p><p># vi /etc/httpd.conf</p><p>要改的有如下几处:<br />找到</p><p>LoadModule php5_module modules/libphp5.so</p><p>让php5以动态模块方式(DSO)加载在apache上。apache在启动后去加载php。前面的#号去掉(默认已去掉注释)</p><p>#AddType application/x-gzip .gz .tgz</p><p>下面加二行：</p><p>AddType application/x-httpd-php .php<br />AddType application/x-httpd-php-source .phps<br />第一句是让apache在遇到.php文件后缀的时候，调用php模块解释php里面的代码。第二句是在遇到.phps文件后缀的时候以语法高亮方式显示 php源代码。这里可以做很多文章，比如AddTypeapplication/x-httpd-php .html，这样apache会把.html文件也通过php去解释，很多网站的"伪静态"就是这里做的手脚。</p><p>找到DirectoryIndex index.html<br />改为DirectoryIndex index.htmlindex.htm index.php，这是在给apache设置默认首页，并且是有先后顺序的。</p><p><strong>设置开机自启动：</strong></p><p># cp /usr/local/apache2/bin/apachectl/etc/init.d/httpd</p><p><strong>将apache添加为系统服务</strong></p><p># chkconfig --add httpd</p><p><strong>开启服务</strong></p><p># service httpd start</p><p>同理servicehttpd stop就是停止服务。还可以servicehttpd restart。不过这个没有什么提示信息，你可以自己编写个shell脚本，加入一些提示信息就显得好看多了。</p><p></p><p><strong>2、配置Mysql</strong></p><p><strong>将mysql加入开机启动服务</strong></p><p># cd /usr/lamp/mysql5</p><p># cp ./support-files/mysql.server /etc/init.d/mysqld</p><p><strong>把mysql添加为系统服务，服务名为mysqld</strong></p><p># chmod 700 /etc/rc.d/init.d/mysqld</p><p># chkconfig --add mysqld</p><p><strong>加入系统环境变量</strong></p><p># exportPATH="/usr/lampp/mysql5/bin"(慎用)</p><p>这样在打开终端后，无论处于哪一个目录都可以直接mysql -uxxx -p了</p><p><strong>启动mysql</strong></p><p># service mysqld start</p><p>应该能看到mysql的启动信息了，这是人家编写好的shell脚本，所以会显示开启和停止的提示信息，你也可以参照mysql.server的源代码自己编写一个shell脚本。service mysqld stop就是停止mysql服务。</p><p><strong>更改root用户密码</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果root用户没密码</p><p>mysqladmin -uroot password'newpassword'</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果root用户有密码</p><p>mysqladmin -uroot -poldpasword password'newpassword'</p><p>关于my.cnf如何配置，请去问mysql的官方文档。</p><p></p><p><strong>3、配置php</strong></p><p>linux跟wndows下不一样，linux下php基本已经在安装的过程中把那些链接库文件链接完了，而windows下基本是解压后去配置php.ini来决定加载哪个dll。不过还是有几个需要改的</p><p># vi /etc/php.ini</p><p>找到session.save_path= "/tmp"那一项，把它前面的";"去掉。</p><p></p><p><strong>4、配置Memcached</strong></p><p><strong>启动Memcache的服务器端：</strong></p><p># /usr/local/bin/memcached -d -m 10 -uroot -l 192.168.0.200 -p 12000 -c 256 -P /tmp/memcached.pid</p><p>-d选项是启动一个守护进程，</p><p>-m是分配给Memcache使用的内存数量，单位是MB，我这里是10MB，</p><p>-u是运行Memcache的用户，我这里是root，</p><p>-l是监听的服务器IP地址，如果有多个地址的话，我这里指定了服务器的IP地址192.168.0.200，</p><p>-p是设置Memcache监听的端口，我这里设置了12000，最好是1024以上的端口，</p><p>-c选项是最大运行的并发连接数，默认是1024，我这里设置了256，按照你服务器的负载量来设定，</p><p>-P是设置保存Memcache的pid文件，我这里是保存在/tmp/memcached.pid，</p><p><strong>如果要结束Memcache进程，执行：</strong></p><p># kill `cat /tmp/memcached.pid`</p><p>也可以启动多个守护进程，不过端口不能重复。</p><p><strong>重启apache，</strong></p><p># service httpd restart</p><p><strong>查看memcache状态</strong></p><p>telnet 192.168.0.98 11211</p><p><strong>输入stats查询状态</strong></p><p>stats</p><p></p><p></p></div><div class="entry-tags"><strong>Tags:</strong><a href="http://sk2.com/tag/centos/">centos</a>,<a href="http://sk2.com/tag/环境配置/">环境配置</a></div></div><ul id="flip2" class="flip"><li>Newer:<a href="http://sk2.com/post/121.html">linux目录结构</a></li><li>Older:<a href="http://sk2.com/post/119.html">linux常用命令</a></li></ul></div>
<div id="footer"><div><a rel="nofollow" class="admin" href="http://sk2.com/login"><small>ADMIN</small></a><address>&copy; 2010 <a href='http://sk2.com/'>blog.sk80.com</a></address></div></div></div></div><script type="text/javascript" src="http://sk2.com/include/js/resize.js"></script><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-5695529-2");pageTracker._trackPageview();} catch(err) {}</script></body></html>

<script language="javascript" type="text/javascript" src="http://js.users.51.la/3688801.js"></script>
<noscript><a href="http://www.51.la/?3688801" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/3688801.asp" style="border:none" /></a></noscript>