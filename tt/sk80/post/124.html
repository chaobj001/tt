<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="generator" content="blog.sk80.com" /><meta name="keywords" content="个人用linux中的总结:Linux,linux " /><meta name="description" content="个人用linux中的总结,Linux 任务控制的几个技巧( &, [ctrl]-z, jobs, fg, bg, kill),利用Vsftpd 搭建虚拟用户FTP服务器" /><meta name="author" content="4kychao" /><link rel="stylesheet" type="text/css" href="http://sk2.com/templates/default/style.css" /><title>个人用linux中的总结</title></head><body><div id="wrapper"><div id="header"><div id="header-inner"><p class="sitename">blog.sk80.com</p><div class="description">等我有钱了, 咱买棒棒糖, 买2 根, 1 根 你看着我吃, 另1根 我吃给你看。</div><div class="menu"><ul><li class="current_page"><a rel="nofollow" href="/">日志</a></li><!--li><a href="#">About</a></li--></ul></div></div></div><div id="wrapper-inner"><p id="topic-path"><a href="/" rel="nofollow">Home</a>&gt;<a href="http://sk2.com/category/linux/">Linux</a>&gt;<strong class="current">个人用linux中的总结</strong></p><ul id="flip1" class="flip"><li class="newer"><a title="Linux 任务控制的几个技巧( &, [ctrl]-z, jobs, fg, bg, kill)" href="http://sk2.com/post/125.html" rel="nofollow">Newer</a></li><li class="older"><a title="利用Vsftpd 搭建虚拟用户FTP服务器" href="http://sk2.com/post/123.html" rel="nofollow">Older</a></li></ul><div id="detail"><div class="post"><h1>个人用linux中的总结</h1><ul class="info"><li class="date">2010年 03月23日  22:57</li><li class="category"><a href="http://sk2.com/category/linux/">Linux</a></li></ul><div class="textbody">个人用linux中的总结<br /><br />1.更改telnet登录慢的问题:<br />cd /etc<br />vi resolv.conf<br />将里面内容清空<br /><br />2.更改root用户不能直接远程登录问题:<br />cd /etc<br />cd pam.d<br />vi login<br />注释掉这行<br />#auth required pam_securetty.so //该行注释掉<br /><br />3.挂接USB移动硬盘<br />将移动硬盘挂上.<br />#df 查看Linux下硬盘盘符<br />mount /dev/sda1 /mnt/usb (举例)<br /><br />5.更改Linux启动时用图形界面还是字符界面<br />cd /etc<br />vi inittab<br />将id:5:initdefault: 其中5表示默认图形界面<br />改id:3: initdefault: 3表示字符界面<br /><br />8.配置smb可以被哪些IP所用.<br />cd /etc/samba<br />Vi smb.conf<br />找到hosts allow = 192.168.1. 192.168.2. 127.<br />修改其为哪些机器所用,注意IP之间用逗号分开<br />举例:<br />hosts allow =192.168.1.110,192.168.1.120<br /><br />9.禁止在后台使用CTRL-ALT-DELETE重起机器<br />cd /etc/inittab<br />vi inittab 在文件找到下面一行<br /># Trap CTRL-ALT-DELETE<br />ca::ctrlaltdel:/sbin/shutdown -t3 -r now （注释掉这一行）<br />如： # Trap CTRL-ALT-DELETE<br />#ca::ctrlaltdel:/sbin/shutdown -t3 -r now<br /><br />10.修改主机名<br />vi /etc/sysconfig/network<br />修改HOSTNAME一行为HOSTNAME=主机名<br /><br />12.查看开机检测的硬件<br />dmesg | more<br /><br />13.查看硬盘使用情况<br />df –m<br /><br />14.查看目录的大小<br />du –sh dirname<br /><br />15.解压小全<br />tar xvfj lichuanhua.tar.bz2<br />tar xvfz lichuanhua.tar.gz<br />tar xvfz lichuanhua.tgz<br />tar xvf lichuanhua.tar<br />unzip lichuanhua.zip<br /><br />16.显示内存使用情况<br />free –m<br /><br />17.忘记root密码，如果是grup<br />1.出现grup画面时，用上下键选启动Linux的哪一项，按e键<br />2.上下键选择 kernel /boot/……… 然后按e键<br />3.修改现在见到的命令好，加入single 结果：<br />kernel /boot/vmlinuz-2.4.20-8 single ro root=LABEL=<br />4.回车返回，按b键启动，直接进入linux命令行<br />直接执行: passwd root<br />修改密码，你的密码就搞定<br />如果是lilo：按Tab,画面出现lilo 键入：linux single ,回车<br /><br />18.显示系统运行了多长时间<br />uptime<br /><br />19.重新启动网络<br />/etc/init.d/network restart<br /><br />20.显示开机自检的内容命令<br />dmesg<br /><br />21.查看端口<br />netstat –an<br />netstat -anp<br /><br />22..端口的详细列表<br />/etc/services<br /><br />23.查看物理信息<br />lspci<br /><br />24.安装图形界面不能出现，使用解析进行安装<br />Linux lowres (使用的是640X480分辨率)<br /><br />25.屏蔽主机的ping 命令，是被别人无法ping你的机器<br />echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all<br /><br />26.彻底删除Oracle安装的程序,删除一下几个目录<br />/etc/oraInst.loc /tmp/<br />/etc/oratab $ORACLE_BASE/*<br /><br />28.RPM包<br />1.卸载 RPM –e<br />2.查询 rpm –q<br />-a 查询所有已安装的软件包<br />-f 查询包含文件的软件的包<br />-i 显示软件包信息<br />-l 显示软件包的文件列表<br />3.验证 rpm –v<br />rpm –Va 验证整个文件丢失了哪些文件<br />碰到不认识的文件使用<br />rpm –qf<br />4.一个rpm包安装到哪里去了（已经安装的包）<br />rpm –qi 包名(这里不包括.rpm后缀的软件名称，也就是说只能用mysql或者mysql-3.23.54a而不是mysql-3.23.54a.rpm)<br />5.一个rpm包中包含哪些文件<br />一个没有安装过的软件包：使用rpm –qip ***.rpm<br />一个已经安装过的软件包: 使用rpm –qi ***.rpm<br /><br />29.看已经安装的字符集<br />locale -a<br /><br />30.抓包命令tcpdump<br />例：抓获192.168.1.32 的主机收到和发出的所有的数据包<br />tcpdump host 192.168.1.32<br />截获特定的端口<br />tcpdump tcp port 21 host 192.168.1.32<br /><br />31.文本截面的中文支持<br />RH 9.0自带安装包 zhcon_0.2.3_1.rh9.i386.rpm<br />安装完成后，执行: zhcon 就可以支持中文了<br /><br />32.查看端口现在运行什么程序<br />lsof –i:8001<br /><br />33.察看实时的日志<br />tail –f /var/log/messages<br /><br />34.当mount出现死的现象<br />1.fuser –m /mnt/share 查出该程序的进程，然后Kill掉<br />2.再umount /mnt/share<br /><br />35.linux 控制 windows<br />1.用RH9.0自己带rdesktop,版本是1.2.0<br />命令：rdesktop –u user –f 192.168.1.70 色默认的是8位<br />2要达到16色，就要下载新版本1.3.0<br />rdesktop –a 16 –u lichuanhua –g 800*600 192.168.1.70<br /><br />36. Linux挂载Windows分区<br />mount ntfs分区<br />一.单机挂windows的NTFS分区<br />1. 上www.google.com搜索并下载 kernel-ntfs-2.4.18-14.i686.rpm<br />2. rpm -ivh kernel-ntfs-2.4.18-14.i686.rpm<br />3. mkdir /mnt/share<br />4. mount -t ntfs /dev/hda1 /mnt/share<br />要挂载Windows分区，首先新建一个目录/mnt/share，修改/etc/fstab，在最末尾添上（假设Windows安装在硬盘的第1个分区）<br />/dev/hda1 /mnt/share ntfs defaults 0 0<br />二.网络上一台windows和linux机器，linux机器挂载windows上的共享文件<br />windows IP:192.168.1.1<br />1.linux挂载192.168.1.1(windows)上共享文件dbf,挂在linux的/mnt/share目录下,在/mnt下建立share目录<br />mount -t smbfs -o username=massky,password=massky //192.168.<br />1.1/dbf /mnt/share<br />2.机器重启自动挂载，vi /etc/fstab最后加入：<br />//192.168.1.1/dbf /mnt/share smbfs defaults,auto,username=m<br />assky,password=massky 0 0<br /><br />37.Oracle9i在Linux9.0上的安装<br />1.确保RPM开发包，使用下面命令查看是否已安装这些包<br />rpm -q gcc cpp compat-libstdc++ glibc-devel glibc-kernheaders binutils<br />2.进行解压<br />zcat Linux9i_Disk1.cpio.gz | cpio -idmv<br />zcat Linux9i_Disk2.cpio.gz | cpio -idmv<br />zcat Linux9i_Disk3.cpio.gz | cpio -idmv<br />3.设置内核参数<br />vi /etc/sysctl.conf,加入下面参数<br />kernel.shmmax=4294967295 内存512M<br />计算方法为：kernel:shmmax=1024*1024*RAM(M)/2<br />执行sysctl -p生效<br />4.建立数据目录和用户<br />groupadd dba<br />groupadd oinstall<br />useradd –g oinstall –G dba oracle<br />passwd oracle<br /><br />mkdir /opt/oracle<br />mkdir /opt/oracle/product<br />mkdir /opt/oracle/product/9.2.0<br />chown –R oracle.oinstall /opt/oracle<br />mkdir /var/opt/oracle<br />chown oracle.dba /var/opt/oracle<br />chmod 755 /var/opt/oracle<br />5.vi .bash_profile 设置变量<br />export LD_ASSUME_KERNEL=2.4.1<br />export ORACLE_BASE=/opt/oracle<br />export ORACLE_HOME=/opt/oracle/product/9.2.0<br />export ORACLE_SID=ora9i<br />export ORACLE_TERM=xterm<br />export TNS_ADMIN=$ORACLE_HOME/network/admin<br />export NLS_LANG=AMERICAN_AMERICA.ZHS16GBK<br />export ORA_NLS33=$ORACLE_HOME/ocommon/nls/admin/data<br />LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib<br />LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib<br />export LD_LIBRARY_PATH<br /><br />export PATH=$PATH:$ORACLE_HOME/bin<br />CLASSPATH=$ORACLE_HOME/JRE:$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib<br />CLASSPATH=$CLASSPATH:$ORACLE_HOME/network/jlib<br />export CLASSPATH<br /><br /><br />38.网卡的激活与停止<br />超级用户;<br />ifconfig eth0 down 停止<br />ifconfig eth0 up 启动<br /><br />40.Linux下cvs的安装配置<br />1.安装CVS软件包.<br />2.groupadd cvs<br />3.useradd -g cvs cvsroot<br />4.chmod 777 -R /home/cvsroot<br />5.cd /etc<br />6.vi profile<br />新增以下二行:<br />CVSROOT=/home/cvsroot export CVSROOT<br />CVSEDIT=vi export CVSEDIT<br />7.查看/etc/services文件中cvspserver 所在行的注释状态(有则把注释去掉)<br />8.进入 /etc /xinetd.d, vi cvspserver该文件不存在,内容如下:<br />service cvspserver<br />{<br />disable = no<br />socket_type =stream<br />wait =no<br />user =root<br />env =HOME=<br />server =/usr/bin/cvs<br />server_args =--allow-root=/home/cvsroot pserver<br />log_on_failure +=USERID<br />}<br />9.vi /etc/xinetd.conf 内容如下,每次开机自动启动服务:<br />service cvspserver<br />{<br />port = 2401<br />socket_type = stream<br />wait = no<br />user = root<br />server = /usr/bin/cvs<br />server_args = -f --allow-root=/home/cvsroot pserver<br />bind = 168.168.1.110<br />}<br />重新登录 换cvsroot用户<br />10./etc/init.d/xinetd restart<br />11.cvs init（初始化：CVS版本库的初始化）<br />12.cvs -d :pserver:cvsroot@192.168.1.110:/home/cvsroot login(用户登录）没有任何提示信息就成功。<br />13.首先要导入库,假设项目名称为LinuxISQuote.<br />步骤：<br />　　1、进入LinuxISQuote.<br />2、一个项目的首次导入<br />cvs import LinuxISQuote lch V_0_0_1<br />此时到$CVSROOT目录下，可以看到多了一个LinuxISQuote的目录。<br /><br />41．命令绝对路径<br />.如果不是绝对路径的话，你可以这样输入<br />(1)[root@RedHat linux]# whereis adduser<br />adduser: /usr/sbin/adduser /usr/share/man/man8/adduser.8.gz<br />你这样输入就可以了 /usr/sbin/adduser xxx<br />(2) 或者改vi /etc/profile,加入一句：PATH=$PATH:/usr/sbin:. export PATH，<br />就可以直接输入adduser<br /><br />42．修改用户的权限<br />.改用户权限的话，你可以改vi /etc/passwd<br />如：我想lll变成和root用户一样，就改： lll:x:508:508::/home/lll:/bin/bash<br />改后面的 508 为和root后面的数据一样的就可以了！<br />改为：lll:x:508:0::/home/lll:/bin/bash<br />lll就拥有root的权限了。<br /><br />43．修改grub启动时的背景图片<br />1　将一图片转化成640*480,14色的XPM文件：<br />　　　#convert abc.jpg -colors 14 -geometry 640x480! abc.xpm<br />2 压缩生成的xpm文件，使用gzip<br />#gzip -9 abc.xpm<br />3 将abc.xpm.gz拷到/boot/grub下<br />4　修改/boot/grub/menu.lst<br />splashimage=(hd0,0)/boot/grub/abc.xpm.gz<br /><br />44．VNC for Linux的安装<br />1.第一步在linux上安装VNCserver<br />tar zxvf vnc-X.tgz<br />cd X<br />cp *vnc* /usr/local/bin/<br />没有vnc 目录，就建vnc目录<br />mkdir /usr/local/vnc<br />cp -r classes/ /usr/local/vnc/<br />2.设置vnc server的访问密码<br />vncpasswd<br />3.linux版vnc server的改进.首先执行vncserver<br />修改/root/.vnc/xstartup里的 twm $ 为gnome-session &amp;<br />4.启动vnc server<br />vncserver<br />注意New 'X' desktop is KILl:3 记住3是客户端要用到的端口<br />5.客户端启动vncviewer,输入：如192.168.1.110:3<br />OK,你就看到了。。哈。。<br />如果在Windows客户机中安装了IE或NETSCAPE,还可以启动IE或netscape<br />然后在地址栏输入(如果是1的话)<br />http://192.168.1.64:5801<br /><br /><br />45. 改变或关闭Oracle XDB的ftp和http端口<br />Oracle 9i开始，创建数据库时默认包含了XDB特性。一旦启动了数据库和Listener，Oracle XDB的http服务就占用8080端口，刚好和JBoss、Tomcat等默认端口冲突。因此，必须有一个做出更改。改Tomcat等容易，只是一时不知道怎么改XDB的配置。<br />在Google上搜索一下，找到了答案。原来Oracle XDB的端口设置不在配置文件中，而是在数据库里。修改XDB的http和ftp服务端口的方法有3种：<br />1。使用sys登录Oracle，利用dbms_xdb修改端口设置<br />SQL&gt; -- Change the HTTP/WEBDAV port from 8080 to 8081<br />SQL&gt; call dbms_xdb.cfg_update(updateXML(<br />2 dbms_xdb.cfg_get()<br />3 , '/xdbconfig/sysconfig/protocolconfig/httpconfig/http-port/text()'<br />4 , 8081))<br />5 /<br />Call completed.<br />SQL&gt; -- Change the FTP port from 2100 to 2111<br />SQL&gt; call dbms_xdb.cfg_update(updateXML(<br />2 dbms_xdb.cfg_get()<br />3 , '/xdbconfig/sysconfig/protocolconfig/ftpconfig/ftp-port/text()'<br />4 , 2111))<br />5 /<br />Call completed.<br />SQL&gt; COMMIT;<br />Commit complete.<br />SQL&gt; EXEC dbms_xdb.cfg_refresh;<br />PL/SQL procedure successfully completed.<br />2。使用OEM console，选择数据库，XML Database，Configuration。更改XDB的有关设置。<br />3。去掉数据库的初始化参数： dispatchers='(PROTOCOL=TCP) (SERVICE=XDB)'，将会禁止XDB的http和ftp服务。<br /><br />46.XML for linux的安装<br />我下载了两个文件：libxml2-2.6.13.tar.gz和xml4c5_4_0-redhat_80-gcc_32.tar.gz<br />加入环境：<br />export XERCESCROOT=/home/lch/xml<br />export PATH=$PATH:/home/lch/xml/bin<br />export XERCESC_NLS_HOME=$XERCESCROOT/msg<br />export LD_LIBRARY_PATH=$XERCESCROOT/lib:$LD_LIBRARY_PATH (on Solaris, Linux)<br />进入xml4c5_4_0-redhat_80-gcc_32.tar.gz解压后的目录<br />runConfigure -plinux -cgcc -xg++ -rpthread<br />./configure<br />gmake<br /><br />47.ace for linux的安装<br />由于安装说明文件“ACE-INSTALL.html”中提及的linux安装过程极少，其主要针对Unix、Windows，手动配置较多，加上本人安装后感觉“ACE-INSTALL.html”文件有些影响视听，因为主要的动作都可以由ACE包中的安装脚本ACE-install.sh自动完成，我们主要的工作就可以直接对这个安装脚本来处理即可。<br />1、安装环境：<br />lRedHat 9.0<br />ACE安装包ACE+TAO+CIAO.tar.gz，<br />http://deuce.doc.wustl.edu/Download.html ， "Latest Beta Kit"，beta版既是ACE的最新版。<br />2、安装过程：<br />第一步<br />先设置ACE_ROOT环境，命令：<br />“vi /etc/profile”<br />在其中加入4行<br />ACE_ROOT=/opt/ACE<br />export ACE_ROOT<br />LD_LIBRARY_PATH=$ACE_ROOT/ace:$LD_LIBRARY_PATH<br />export LD_LIBRARY_PATH<br />我是加在“export PATH USER….”后的。完成后将/etc/profile执行一次，命令：<br />“chmod 555 /etc/profile”<br />“/etc/profile”<br />这样我们的ACE_ROOT就设置好了，可以用如下命令查看ACE_ROOT是否设置好了：<br />“echo $ACE_ROOT”<br />这个时候最好reboot启动一次linux。<br />第二步<br />不要自己手工将ACE+TAO+CIAO.tar.gz包完全解开，特别强调不要完全解开，后面可以看到安装脚本会给我们解开它的；如果你手工解开全部，安装脚本将会将你的解压缩目录删除的！我们要做的事就只是将ACE+TAO+CIAO.tar.gz包中的ACE-install.sh安装脚本单独解出来，并对其修改。我们只要这一个文件就可以。<br />用mkdir建目录，如/home/my/ACE，然后将你的 ACE+TAO+CIAO.tar.gz放在此目录下（用cp命令拷贝或mv命令移动到此目录）。注意这个目录将是你的一个存放 ACE+TAO+CIAO.tar.gz的目录，安装脚本会来这个目录找这个文件的，这个目录和ACE_ROOT是不一样的，且ACE- install.sh也提示不要将这两个目录设置成同一个目录。ACE_ROOT将是我们的安装目标目录。<br />从ACE+TAO+CIAO.tar.gz解压出单个文件ACE-install.sh：<br />“tar –zxvf ACE+TAO+CIAO.tar.gz ACE_wrappers/ACE-install.sh”<br />解好后，会出来一个新的子目录“ACE_wrappers”。此时可以先将ACE-install.sh移到外面的目录来：<br />“mv /ACE_wrappers/ACE-install.sh .”<br />“.” 代表当前目录。当然ACE-install.sh在什么路径下是没什么影响的，因为我们要对ACE-install.sh的内容进行修改的，里面有很多路径要修改。好，现在在/home/my/ACE就有了ACE-install.sh，我们现在用vi对其进行修改，修改前自己可以先备份一个。命令：<br />“cp ACE-install.sh ACE-install.sh.bak”<br />“vi ACE-install.sh”<br />我们可以看到缺省的，这个文件是用来在UNIX下做安装的。所以我们要将其中的有关UNIX的部分换成linux即可。<br />先找到“MY_ACEDIR=${HOME}/aceconfig”，将其改成“MY_ACEDIR=/home/my/ACE”，就是改成我们自己建的、放有ACE+TAO+CIAO.tar.gz文件的目录，之后去掉前面的注释“#”号。<br />接着在下面一点，找到“MY_ACE_CONFIG=config-sunos5.4-sunc++-4.x.h”，将其修改成 “MY_ACE_CONFIG=config-linux.h”，即改成linux下的配置文件。继续改，找到 “MY_ACE_GNU_MACROS=platform_sunos5_sunc++.GNU”，将其改成 “MY_ACE_GNU_MACROS=platform_linux.GNU”。这个是各种操作系统平台下的GNU宏文件设置。<br />好了，文件修改完毕，保存退出“:wq”。<br />第三步<br />我们的重点到了，现在就可以安装ACE了。<br />此时应该是在/home/my/ACE目录下，我们执行：<br />./ACE-install.sh<br /><br />49开启后台talk会话功能<br />开启talk功能： chkconfig talk on<br />交谈 : talk massky(用户)<br /><br />50.不让显示器休眠<br />setterm –blank 0<br /><br />51.定制用户登录时显示的信息<br />编辑 /etc/motd 加入登录时要显示的信息<br /><br />52.查看路由信息<br />netstat –rn<br />route –n<br /><br />54.显示硬件信息<br />lsdev<br />55. 显示当前加载的核心模块<br />lsmod<br /><br />56.列出系统内核所有可用的模块<br />modprobe –l<br /><br />57.根据进程名显示进程号<br />pidof vsftpd<br /><br />58. 将内容倒序读出<br />rev file.name<br /><br />59.定制用户登录时显示的信息<br />编辑/etc/motd 加入登录时要显示的信息<br /><br />60.查看密码过期信息<br />change –l longinname<br /><br />61.显示最后一个登录到系统的用户<br />last<br /><br />62.显示最后一个登录不成功的登录尝试（lastb命令）<br />如果在系统上不能工作，就需要你建立一个文件：touch /var/log/btmp,然后在执行 lastb命令就可以查看到最后一个不成功的登录尝试，<br /><br />63.以3秒钟执行一个ls命令<br />watch –n 3 ls</div><div class="entry-tags"><strong>Tags:</strong><a href="http://sk2.com/tag/linux/">linux</a></div></div><ul id="flip2" class="flip"><li>Newer:<a href="http://sk2.com/post/125.html">Linux 任务控制的几个技巧( &, [ctrl]-z, jobs, fg, bg, kill)</a></li><li>Older:<a href="http://sk2.com/post/123.html">利用Vsftpd 搭建虚拟用户FTP服务器</a></li></ul></div>
<div id="footer"><div><a rel="nofollow" class="admin" href="http://sk2.com/login"><small>ADMIN</small></a><address>&copy; 2010 <a href='http://sk2.com/'>blog.sk80.com</a></address></div></div></div></div><script type="text/javascript" src="http://sk2.com/include/js/resize.js"></script><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-5695529-2");pageTracker._trackPageview();} catch(err) {}</script></body></html>

<script language="javascript" type="text/javascript" src="http://js.users.51.la/3688801.js"></script>
<noscript><a href="http://www.51.la/?3688801" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/3688801.asp" style="border:none" /></a></noscript>