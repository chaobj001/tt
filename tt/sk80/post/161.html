<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="generator" content="blog.sk80.com" /><meta name="keywords" content="Linux CVS配置:Linux," /><meta name="description" content="Linux CVS配置,Linux crontab格式及配置文件,SVN on CentOS" /><meta name="author" content="4kychao" /><link rel="stylesheet" type="text/css" href="http://sk2.com/templates/default/style.css" /><title>Linux CVS配置</title></head><body><div id="wrapper"><div id="header"><div id="header-inner"><p class="sitename">blog.sk80.com</p><div class="description">等我有钱了, 咱买棒棒糖, 买2 根, 1 根 你看着我吃, 另1根 我吃给你看。</div><div class="menu"><ul><li class="current_page"><a rel="nofollow" href="/">日志</a></li><!--li><a href="#">About</a></li--></ul></div></div></div><div id="wrapper-inner"><p id="topic-path"><a href="/" rel="nofollow">Home</a>&gt;<a href="http://sk2.com/category/linux/">Linux</a>&gt;<strong class="current">Linux CVS配置</strong></p><ul id="flip1" class="flip"><li class="newer"><a title="Linux crontab格式及配置文件" href="http://sk2.com/post/162.html" rel="nofollow">Newer</a></li><li class="older"><a title="SVN on CentOS" href="http://sk2.com/post/160.html" rel="nofollow">Older</a></li></ul><div id="detail"><div class="post"><h1>Linux CVS配置</h1><ul class="info"><li class="date">2010年 03月28日  23:38</li><li class="category"><a href="http://sk2.com/category/linux/">Linux</a></li></ul><div class="textbody"><p>运行<span style="color: rgb(0, 255, 0);">rmp -qa | grep “cvs”</span>以确定系统已经安装有CVS Server</p><p>1)进入 /etc/xinetd.d 目录,编辑一个 cvspserver 的文件,文件内容如下:<br /><span style="color: rgb(0, 255, 0);"># default: on<br /># description: The cvs server sessions;<br />#<br />service cvspserver<br />{<br />disable = no<br />port = 2401<br />socket_type = stream<br />protocol = tcp<br />wait = no<br />user = root<br />passenv = PATH<br />env = HOME=/home/cvsroot/CVSROOT<br />server = /usr/bin/cvs<br />server_args = -f –allow-root=/home/cvsroot pserver<br />log_on_failure += USERID<br />only_from = 192.168.0.0/24<br />}</span><br />其中only_from是用来限制访问的，可以根据实际情况不要或者修改。<br /><span style="color: rgb(0, 255, 0);"># chmod 644 cvspserver</span></p><p>2)修改 /etc/services 文件,在其中加入服务端口(对应上面文件的 port = 部分),服务名与上面的文件名相同,内容格式如下:<br /><span style="color: rgb(0, 255, 0);">cvspserver 2401/tcp # Cvs Server<br />cvspserver 2401/udp # CVS Server</span></p><p>3)创建 cvs 组和 cvs 用户<br />假设我们建一个组叫cvs，用户名是cvsroot．建组和用户的命令如下<br /><span style="color: rgb(0, 255, 0);"># groupadd cvs<br /># adduser cvsroot -s /bin/bash -g cvs -d /home/cvsroot</span></p><p>4)创建并编辑 /home/cvsroot/.bashrc 文件,其内容如下:<br /><span style="color: rgb(0, 255, 0);">.bashrc<br />=============================<br /># .bashrc<br /># User specific aliases and functions<br /># Source global definitions<br />if [ -f /etc/bashrc ]; then<br />. /etc/bashrc<br />fi<br />============================= </span></p><p>5)初始化 CVS,建立CVS仓库<br /><span style="color: rgb(0, 255, 0);"># cd /home<br /># chown -R cvsroot:cvs cvsroot<br /># su - cvsroot<br />$ cvs -d /home/cvsroot init</span> 此处对应上面创建的 cvsroot 路径<br />用 cvsroot 用户登陆，修改 /home/cvsroot （CVSROOT）的权限，赋与同组人有读写的权限：<br /><span style="color: rgb(0, 255, 0);">$chmod 771 .</span> （或者770应该也可以）<br />6)创建口令生成文件 passwdgen.pl (用 cvsroot 用户注册)<br /><span style="color: rgb(0, 255, 0);">$ mkdir bin<br />$ cd bin</span><br />创建并编辑文件 passwdgen.pl ,内容如下:<br /><span style="color: rgb(0, 255, 0);">#!/usr/bin/perl<br />srand (time());<br />my $randletter = “(int (rand (26)) + (int (rand (1) + .5) % 2 ? 65 : 97))”;<br />my $salt = sprintf (”%c%c”, eval $randletter, eval $randletter);<br />my $plaintext = shift; my $crypttext = crypt ($plaintext, $salt);<br />print “${crypttext}\n”;<br />$ chmod u+x passwdgen.pl</span></p><p>7)创建 cvs 用户密码文件 passwd , 读权限文件 readers , 写权限文件 writers.<br />这三个文件位于 /home/cvsroot/CVSROOT 目录下.(用 cvsroot用户注册)<br /><span style="color: rgb(0, 255, 0);">$ vi passwd<br />passwd 内容如下:<br />cvsroot::cvsroot<br />work::cvsroot<br />zzg::cvsroot<br />anonymous::cvsroot</span></p><p>8)用 passwdgen.pl 生成密码,加入到上面的 passwd 文件中的用户的 :: 之间,如你给 work 用户分配密码为 work123 ,可如此运行:<br /><span style="color: rgb(0, 255, 0);">$ passwdgen.pl “work123″<br /></span>系统会显示出一串字符,将上面的字符拷贝到 :: 中.<br />$ vi readers,内容如下:<br /><span style="color: rgb(0, 255, 0);">anonymous<br /></span>$ vi writers,内容如下:<br /><span style="color: rgb(0, 255, 0);">work<br />zzg</span><br />(特别注意:在 readers 中添加了某个用户,那么该用户如果添加到 writes 文件中将没有任何意义,因为系统在 readers 文件中找到该用户后,将不会再到 writes 文件中去查找,这会造成你添加在 writers 文件中企图赋予”写”权限的用户,由于该用户已经在 readers 文件中存在,而失去”写”权限.)</p><p>最后,我们来测试一下:<br />用 work 用户登录 cvs (假设我的 IPADDERS = 192.168.0.5):<br /><span style="color: rgb(0, 255, 0);">$ cvs -d :pserver:work@192.168.0.5:/home/cvsroot login</span><br />如果输入口令后,如果没有返回出错信息,则表示你的 cvs 服务器搭建成功.</p><p>注:redhat fedora默认没有安装xinetd,需要先yum install xinetd一下</p></div></div><ul id="flip2" class="flip"><li>Newer:<a href="http://sk2.com/post/162.html">Linux crontab格式及配置文件</a></li><li>Older:<a href="http://sk2.com/post/160.html">SVN on CentOS</a></li></ul></div>
<div id="footer"><div><a rel="nofollow" class="admin" href="http://sk2.com/login"><small>ADMIN</small></a><address>&copy; 2010 <a href='http://sk2.com/'>blog.sk80.com</a></address></div></div></div></div><script type="text/javascript" src="http://sk2.com/include/js/resize.js"></script><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-5695529-2");pageTracker._trackPageview();} catch(err) {}</script></body></html>

<script language="javascript" type="text/javascript" src="http://js.users.51.la/3688801.js"></script>
<noscript><a href="http://www.51.la/?3688801" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/3688801.asp" style="border:none" /></a></noscript>