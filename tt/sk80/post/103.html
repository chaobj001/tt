<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="generator" content="blog.sk80.com" /><meta name="keywords" content="MySQL安装与配置:Mysql,MySQL 安装 " /><meta name="description" content="MySQL安装与配置,Linux网络备份MYSQL,一个Mysql自动备份脚本" /><meta name="author" content="4kychao" /><link rel="stylesheet" type="text/css" href="http://sk2.com/templates/default/style.css" /><title>MySQL安装与配置</title></head><body><div id="wrapper"><div id="header"><div id="header-inner"><p class="sitename">blog.sk80.com</p><div class="description">等我有钱了, 咱买棒棒糖, 买2 根, 1 根 你看着我吃, 另1根 我吃给你看。</div><div class="menu"><ul><li class="current_page"><a rel="nofollow" href="/">日志</a></li><!--li><a href="#">About</a></li--></ul></div></div></div><div id="wrapper-inner"><p id="topic-path"><a href="/" rel="nofollow">Home</a>&gt;<a href="http://sk2.com/category/mysql/">Mysql</a>&gt;<strong class="current">MySQL安装与配置</strong></p><ul id="flip1" class="flip"><li class="newer"><a title="Linux网络备份MYSQL" href="http://sk2.com/post/104.html" rel="nofollow">Newer</a></li><li class="older"><a title="一个Mysql自动备份脚本" href="http://sk2.com/post/102.html" rel="nofollow">Older</a></li></ul><div id="detail"><div class="post"><h1>MySQL安装与配置</h1><ul class="info"><li class="date">2010年 03月20日  18:02</li><li class="category"><a href="http://sk2.com/category/mysql/">Mysql</a></li></ul><div class="textbody">作者：tyc00n<br />如有转载，请注明出处及以上信息<br /><br />在<span href="http://bbs.chinaunix.net/tag.php?name=%D1%A7%CF%B0" class="t_tag">学习</span>MySQL过程中，遇到了很多的麻烦，为了让初学者不再遇到相同的问题，所以我花了点时间写了本文。本人也是一个新手，还望多多指教！！<br />在安装MySQL之前，先来了解一下相关的配置文件<br /><br />MySQL配置文件<br />MySQL发布的最新产品实际上超出了Red Hat Enterprise Linux所携带的版本。但是，稳定性和开放源代码可是很重要的因素，因此在操作系统上使用较早MySQL版本是有道理的。<br />有许多可以采用的配置文件，它们都被包含在<span href="http://bbs.chinaunix.net/tag.php?name=mysql" class="t_tag">mysql</span>-server PRM程序中。还有一个默认的配置文件被包含在mysql PRM程序包中。<br />配置MySQL<span href="http://bbs.chinaunix.net/tag.php?name=%B7%FE%CE%F1%C6%F7" class="t_tag">服务器</span>是一个丰富而复杂的<span href="http://bbs.chinaunix.net/tag.php?name=%B9%A4%D7%F7" class="t_tag">工作</span>。在本文中，我只能肤浅的说一下各种选项。可以使用的MySQL配置文件共有５个。最后４个位于/usr/share/doc/mysql-server-*/目录中。<br />·/etc/my.cnf是默认的MySQL配置文件。应该对这个文件配置修改。它是为学习目的而<span href="http://bbs.chinaunix.net/tag.php?name=%C9%E8%BC%C6" class="t_tag">设计</span>的。<br />·my-small.cnf是为了小型数据库而设计的。不应该把这个模型用于含有一些常用<span href="http://bbs.chinaunix.net/tag.php?name=%CF%EE%C4%BF" class="t_tag">项目</span>的数据库。<br />·my-medium.cnf是为中等规模的数据库而设计的。如果你正在企业中使用RHEL,可能会比这个操作系统的最小RAM需求(256MB)明显多得多的物理<span href="http://bbs.chinaunix.net/tag.php?name=%C4%DA%B4%E6" class="t_tag">内存</span>。由此可见，如果有那么多RAM内存可以使用，自然可以在同一台机器上运行其它服务。<br />·my-large.cnf是为专用于一个SQL数据库的计算机而设计的。由于它可以为该数据库使用多达512MB的内存，所以在这种类型的系统上将需要至少1GB的RAM,以便它能够同时处理操作系统与数据库应用程序。<br />·my-huge.cnf是为企业中的数据库而设计的。这样的数据库要求专用服务器和1GB或1GB以上的RAM。<br />这些选择高度依赖于内存的数量、计算机的运算速度、数据库的细节大小、访问数据库的用户数量以及在数据库中装入并访问数据的用户数量。随着数据库和用户的不断增加，数据库的性能可能会发生变化。<br />我将逐个的说明这些配置文件。如果用户决定使用my-*.cnf文件之一，将首先需要把这个文件复制到/etc/my.cnf文件上。<br />由于这些原因，用户应该仔细观察数据库系统的性能。如果发现问题，可能需要增加更多的RAM，或者把数据库迁移到一个含有附加资源(比如多个<span href="http://bbs.chinaunix.net/tag.php?name=CPU" class="t_tag">CPU</span>)的系统上。<br />提示：数据库变得非常大。把一个SQL数据库目录配置在一个专用分区上可能更有道理。虽然一个不断增长的数据库可能会占满整个分区，但它至少不会吞掉RHEL运行所必需的磁盘空间。<br />/etc/my.cnf文件<br />默认是/etc/my.cnf文件。它包含6条<span href="http://bbs.chinaunix.net/tag.php?name=%C3%FC%C1%EE" class="t_tag">命令</span>，并且这6条命令被组织在3个配置段中。这些配置段与Samba配置文件中的配置段相似，并且含有功能组名称和相关的命令。本文将逐行的说明这个文件的默认版本。如果用户进行了任何修改，将需要确保MySQL启动脚本(即/etc/rc.d/init.d/mysqld)中的命令一致。<br />[mysqld]<br />在这个配置段之内，将会看到与MySQL守护进程相关的命令。<br />datadir=/var/lib/mysql<br />MySQL服务器把数据库<span href="http://bbs.chinaunix.net/tag.php?name=%B4%E6%B4%A2" class="t_tag">存储</span>在由datadir变量所定义的目录中。<br />Socket=/var/lib/mysql/mysql.sock<br />MySQL套接字把数据库程序局部的或通过网络连接到MySQL客户。<br /><br />提示：MySQL被配置成使用InnoDB存储器引擎。如果用户在自己的系统上还没有一个InnoDB数据库，将需要给[mysqld]配置段添加skip-innodb语句。<br />[mysql.server]<br />在这个配置段之内，将会看到MySQL服务器守护进程有关的命令。这个配置段的较早期版本被命名为[mysql_server]。如果使用MySQL4.X或MySQL4.X以上版本，将必须把这个配置段标题改成[mysql_server]。当启动MySQL服务时，它使用这个配置段中的选项。<br />user=mysql<br />与MySQL服务相关联的标准用户名是mysql。它应该是/etc/passwd文件的一部分；如果在这个文件中没有发现它，用户可能还没有安装Red Hat Enterprise Linux mysql-server RPM程序包。<br />ba<span href="http://bbs.chinaunix.net/tag.php?name=sed" class="t_tag">sed</span>ir=/var/lib<br />这表示MySQL数据库的顶级目录。它充当MySQL系统上的一个根目录；这个数据库中的其它目录都是相对于这个目录。<br />[safe_mysqld]<br />这个配置段包含MySQL启动脚本所引用的命令。如果使用MySQL4.X或4.X以上版本，必须把这个配置段改成[mysqld_safe]。<br />err-log=/var/log/mysqld.log<br />这是MySQL所关联的错误被发送到的这个文件。如果使用MySQL4.X或4.X以上版本，必须使用log-error指令替换这条命令。<br />pid-file=/var/run/mysqld/mysqld.pid<br />最后，pid-file指令定义MySQL服务器在运作期间的进程标识符(PID)。如果MySQL服务器当前没有运行，这个文件应该不存在。<br />提示：用户可以配置与用户特定相关的MySQL配置文件；为此，只需给指定用户主目录中的.my.cnf隐含文件添加所选的配置命令即可。<br />my-samll-cnf<br />在本文中，将说明my-small-cnf配置文本中的所有命令。当回顾其它MySQL样本配置文件时，将参考本文所解释的各条命令和指令的含义。先从下面这个配置段开始分析该文件中的有效命令和指令：<br />[client]<br />这个配置把指令传递给与MySQL服务器相关的客户。<br />port＝3306<br />MySQL所相关的标准TCP/IP端口是3306。如果需要修改这个端口号(可以增强安全)，必须确保用于MySQL客户与服务器的所有相应配置文件中均修改这个号。<br />socket=/var/lib/mysql/mysql.sock<br />正像默认的/etc/my.cnf文件中所定义的那样，这是控制MySQL客户与服务器间通信的标准套接字文件。<br />[mysqld]<br />当启动MySQL服务器时，它由[mysqld]配置段中所定义的命令来控制。<br />port=3306<br />socket=/var/lib/mysql/mysql.sock<br />当然，与同一个MySQL数据库相关的客户与服务器需要使用相同的TCP/IP端口和套接字。<br />skip-locking<br />多个客户可能会访问同一个数据库，因此这防止外部客户锁定MySQL服务器。这个skip-locking命令是MySQL4.X或4.X以上版本中的skip-external-locking命令。<br />一般来说，如果正在使用MySQL4.X或4.X上以版本，这个set-variable指令没有必要带有这个列表中的这些命令。<br />set-variable=key_buffer=16k<br />这个缓冲区确实很小；如果一个数据库在一个文本文件中包含不止几百行数据，它将会超载这个缓冲区的容量。这个数据库可能不会超载一个文本文件地址簿的容量。如果这不只是一个供个人使用的数据库，这个限额很快就会被达到。假使那样的话，可能需要考虑与其它配置文件之一相关的那些限额。<br />set-variable=max_allowed_packet=1M<br />当然，与一个数据库相关的信息会增加到超出实际数据。在默认的情况下，如果该信息在一个服务器上超过1MB以上，MySQL将会产生一条错误信息。<br />set-variable=thread_stack=64k<br />这条指令限定用于每个数据库线程的栈大小。默认设置足以满足大多数应用。<br />set-variable=table_cache=4<br />用户可以限定一个数据库中打开表的数量；越小的限额(默认值是64)适合越小规模的数据库。<br />set-variable=sort_buffer=64k<br />在处理一个数据库时，用户可能需要内存中附加的缓冲区空间。<br />set-variable=net_buffer_length=2k<br />正如net_buffer_length指令所定义的，MySQL服务器还给传入的请求保留了空间。<br />server-id=1<br />一般来说，如果有一个MySQL主服务器，应该把它的server-id设置成１；应该把MySQL从属服务器的server-id设置成２；<br />[mysqldump]<br />用户可以在不同类型的SQL数据库之间传输数据，这由[mysqldump]配置段中的命令来控制。<br />quick<br />quick选项支持较大数据库的转储。<br />set-variable=max_allowed_packet=16M<br />当然，用来传输数据库表到其它数据库的max_allowed_packet大于客户与服务器之间的简单通信所使用的信息包。<br />[mysql]<br />no-auto-rehash<br />这个配置段设置启动MySQL服务的条件；在这种情况下，no-auto-rehash确保这个服务启动得比较快。<br />[isamchk]<br />[myisamchk]<br />像SQL这样的关系数据库用所谓的Indexed Sequential Access Method(索引顺序存取方法，简称ISAM)来处理。这两个配置段中的命令是相同的；这些命令与检查并修复数据库表的同名命令有关。<br />set-variable=key_buffer=8M<br />set-variable=sort_buffer=8M<br />在前面谈及MySQL服务器时，用户己经见过这些变量。它们在这里都比较大，以便支持数据库的较快速检查与修复。<br />[mysqlhotcopy]<br />interactive-timeout<br />正如[mysqlhotcopy]配置段所指定的，在一个数据库复制操作期间，连接会挂起。在默认情况下，interactive-timeout变量把一个数据传输的最大时间量设置为28800秒(8个小时)。<br /><br />my-medium.cnf文件<br />与中等数据库相关的MySQL配置文件含有和my-small-cnf配置文件中一样的有效配置段。在[mysqld]配置段中，下面这些命令支持较大规模的服务器数据库：<br />set-variable=key_buffer=16M<br />set-variable=table_cache=64<br />set-variable=sort_buffer=512K<br />set-variable=net_buffer_length=8K<br />log-bin<br />一般来说，这个配置段中的命令支持服务器上的较大高速缓存与缓冲区长度。应该看到两条新命令。<br />set-variable=myisam_sort_buffer_size=8M<br />log-bin<br />myisam_sort_buffer_size命令允许MySQL索引数据库，第二条命令支持二进制日志记录方法。<br />[isamchk]<br />[myisamchk]<br />当然，这两个配置段中的缓冲区比用于数据库传输的缓冲区大，这个文件包含下面这些命令；它们发送消息到服务器和接收来自服务器的消息。<br />set-variable=read_buffer=2M<br />set-variable=write_buffer=2M<br /><br />my-large.cnf文件<br />与较大型数据库相关的MySQL配置文件含有和my-samll-cnf配置文件中一样的有效配置段。在本文中，将比较my-large-cnf与my-medium-cnf样本文件中的各条命令。在[mysqld]配置段中，下面这些命令支持较大型的服务器数据库：<br />set-variable=key_buffer=256M<br />set-variable=table_cache=256<br />set-variable=sort_buffer=1M<br />set-variable=myisam_sort_buffer_size=64M<br />set-variable=net_buffer_length=8K<br />这个配置段中有３条附加的命令。record_buffer命令保存对一个数据库中不同表的扫描结果。thread_cache命令对多请求有用；空闲线程被高速缓存起来，进而允许新的搜索操作采用己有的线程。只要这防止搜索操作启动新的服务器进程，这就能减轻系统上的负荷。<br />set-variable=record_buffer=1M<br />set-variable=thread_cache=8<br />set-variable=thread_concurrency=8<br />thread_concurrency变量限定同时运行的线程数量。my-large.cnf样本文件建议用户应该把这个数量限定于本计算机上CPU数量的两倍；这个特定设置相当于４个CPU。<br /><br />my-huge.cnf文件<br />my-huge.cnf文件含有和my-large.cnf配置文件中一样的命令。当然，分配给大多数指令的值比较大并适合较大型的数据库。<br />正如ww.mysql.com站点上所描述的，拥有大量数据库的组织，比如：google、Sabre和NASA都采用MySQL。虽然我们猜测这些公司所使用的命令不同于用户在my-huge.cnf文件中所看到的命令，但这至少让用户对MySQL企业级数据库有一个概念。<br />为了方便起见，本文所说的采用Red Hat Enterprise Linux 4.0所携带的版本，在终端中输入以下命令：<br />[root@tyc00n ~]#rpm –q mysql<br />会得到以下所显示的内容<br />mysql-4.1.7-4 RHEL4.1<br />这说明了在安装RHEL的时候，己经安装了MySQL。是不是己经安装了MySQL就可以运行了呢？接着再输入以下命令：<br />[root@tyc00n ~]# service mysqld start<br />显示如下：<br />mysqld:unrecognized service<br />说明了MySQL服务器还没有启动，还需要安装MySQL-Server程序包。其版本要与所携带的一致。如：MySQL-Server-4.1.7-4.i386.rpm。安装完成之后，重复执行之前的指令，会得到以下显示信息。<br />初始化MySQL数据库： [确定]<br />启动MySQL：&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; [确定]<br /><br />配置MySQL用户<br />在配置一个MySQL服务器时，需要配置该服务器上的用户。这些用户独立于Linux计算机上的用户和组。首先，需要为MySQL系统添加一个根用户。令人遗憾的是，需要在命令行上用明文形式添加与根用户相关的密码。<br />下面这个命令为MySQL系统创建一个根用户：<br />#mysqladmin –u root password i8oe66q<br />当然，还需要创建普通用户来访问这个MySQL系统。接着，需要使用根帐号登录到MySQL中，如下所示：<br />[root@tyc00n root]#mysql –u root –p <br />Enter password:<br />Welcome to the MySQL montor. Command end with; or \g.<br />Your MySQL connection id is 7 to server Version:4.1.7<br /><br />Type ‘help;’ lr ‘\h’ for help.Type ‘\C’ to clean the buffer.<br />Mysql&gt;;<br /><br />提示：用户应该在直接登录到MySQL服务器中创建MySQL用户。除非使用一个SSH这样的安全协议，否则密码将用明文形式传递。此外，由于MySQL密码直接键入在命令行上，所以在创建MySQL用户时，避免让其它人站在旁边观看。<br /></div><div class="entry-tags"><strong>Tags:</strong><a href="http://sk2.com/tag/MySQL/">MySQL</a>,<a href="http://sk2.com/tag/安装/">安装</a></div></div><ul id="flip2" class="flip"><li>Newer:<a href="http://sk2.com/post/104.html">Linux网络备份MYSQL</a></li><li>Older:<a href="http://sk2.com/post/102.html">一个Mysql自动备份脚本</a></li></ul></div>
<div id="footer"><div><a rel="nofollow" class="admin" href="http://sk2.com/login"><small>ADMIN</small></a><address>&copy; 2010 <a href='http://sk2.com/'>blog.sk80.com</a></address></div></div></div></div><script type="text/javascript" src="http://sk2.com/include/js/resize.js"></script><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-5695529-2");pageTracker._trackPageview();} catch(err) {}</script></body></html>

<script language="javascript" type="text/javascript" src="http://js.users.51.la/3688801.js"></script>
<noscript><a href="http://www.51.la/?3688801" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/3688801.asp" style="border:none" /></a></noscript>